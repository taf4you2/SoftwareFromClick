<UserControl x:Class="SoftwareFromClick.Views.TemplateManagerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" Text="Template Manager" FontSize="20" FontWeight="Bold" Margin="0,0,0,20"/>

        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.2*"/>
                <ColumnDefinition Width="20"/>
                <ColumnDefinition Width="2*"/>
            </Grid.ColumnDefinitions>

            <Grid Grid.Column="0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>


                <!-- Existing Templates DataGrid -->
                <TextBlock Grid.Row="0" Text="Existing Templates" FontWeight="Bold" Margin="0,0,0,5"/>

                <Border Grid.Row="1" BorderBrush="Black" BorderThickness="1">
                    <DataGrid x:Name="TemplatesDataGrid" 
                                AutoGenerateColumns="False" 
                                CanUserAddRows="False" 
                                BorderThickness="0"
                                IsReadOnly="True">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Name" Binding="{Binding Name}" Width="*"/>
                            <DataGridTextColumn Header="Type" Binding="{Binding TemplateType}" Width="*"/>
                            <DataGridTextColumn Header="Lang" Binding="{Binding Language.Name}" Width="*"/>

                            <DataGridTemplateColumn Header="Actions" Width="100">
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <Button Content="Delete" Width="70" Click="DeleteTemplateButton_Click" Tag="{Binding Id}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                        </DataGrid.Columns>
                    </DataGrid>
                </Border>
            </Grid>

            <ScrollViewer Grid.Column="2" VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <TextBlock Text="Add New Template" FontWeight="Bold" FontSize="16" Margin="0,0,0,15"/>

                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="10"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Template Name TextBlock -->
                            <StackPanel Grid.Column="0">
                            <TextBlock Text="Template Name:" Margin="0,0,0,5"/>
                            <Border BorderBrush="Black" BorderThickness="1">
                                <TextBox x:Name="TemplateNameTextBox" Height="25" BorderThickness="0" Padding="2"/>
                            </Border>
                        </StackPanel>

                        <!-- Template Type ComboBox -->
                        <StackPanel Grid.Column="2">
                            <TextBlock Text="Template Type:" Margin="0,0,0,5"/>
                            <Border BorderBrush="Black" BorderThickness="1">
                                <ComboBox x:Name="TemplateTypeComboBox" Height="25" BorderThickness="0">
                                    <ComboBoxItem Content="Function"/>
                                    <ComboBoxItem Content="Class"/>
                                </ComboBox>
                            </Border>
                        </StackPanel>
                    </Grid>

                    <!-- Language ComboBox -->
                        <StackPanel Margin="0,0,0,10">
                        <TextBlock Text="Programming Language:" Margin="0,0,0,5"/>
                        <Border BorderBrush="Black" BorderThickness="1">
                            <ComboBox x:Name="LanguageComboBox" Height="25" BorderThickness="0" DisplayMemberPath="Name" SelectedValuePath="Id"/>
                        </Border>
                    </StackPanel>

                    <!-- System Prompt TextBlock -->
                    <StackPanel Margin="0,0,0,10">
                        <TextBlock Text="System Prompt (Role setup):" Margin="0,0,0,5"/>
                        <Border BorderBrush="Black" BorderThickness="1">
                            <TextBox x:Name="SystemPromptTextBox" 
                                     Height="80" 
                                     AcceptsReturn="True" 
                                     TextWrapping="Wrap" 
                                     BorderThickness="0" 
                                     Padding="5"
                                     ToolTip="Example: You are an expert C# programmer..."/>
                        </Border>
                    </StackPanel>

                    <!-- Prompt Template TextBlock -->
                    <StackPanel Margin="0,0,0,10">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="User Prompt Template:" Margin="0,0,0,5"/>
                        </StackPanel>
                        <Border BorderBrush="Black" BorderThickness="1">
                            <TextBox x:Name="UserPromptTextBox" 
                                     Height="150" 
                                     AcceptsReturn="True" 
                                     TextWrapping="Wrap" 
                                     BorderThickness="0" 
                                     Padding="5"
                                     FontFamily="Consolas"/>
                        </Border>
                    </StackPanel>

                    <Grid Grid.Row="2" Margin="0,20,0,0">

                        <!-- Back Button -->
                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                            <Border BorderBrush="Black" BorderThickness="1">
                                <Button Content="Back" Width="100" Height="35" BorderThickness="0" Click="BackButton_Click"/>
                            </Border>
                        </StackPanel>
                        
                        <!-- Save Template Button -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                            <Border BorderBrush="Black" BorderThickness="1" Background="#DDDDDD">
                                <Button Content="Save Template" Width="120" Height="35" BorderThickness="0" Click="SaveTemplateButton_Click"/>
                            </Border>
                        </StackPanel>

                    </Grid>


                </StackPanel>
            </ScrollViewer>
        </Grid>
    </Grid>
</UserControl>